define("ui/slide",["jquery"],function(t){function i(i,n){this.options=t.extend({},s,n),this.init(i)}var s={duration:500,prevBtn:"",nextBtn:"",nav:"",pause:t.noop,onTurnTo:t.noop,play:!1,interval:3e3,autoplay:!1,loop:!1};return t.extend(i.prototype,{init:function(i){if(this.screen=i,this.slideList=this.screen.find(".slide-list"),this.slides=this.slideList.find(".slide-item"),this.slideCount=this.slides.length,this.screenWidth=this.slideList.width(),this.nav=this.options.nav,this.nextBtn=this.options.nextBtn,this.prevBtn=this.options.prevBtn,this.autoplay=this.options.autoplay,this.loop=this.options.loop,this.loop){var s={};t(["first","last"]).each(t.proxy(function(t,i){s[i]=this.slides[i]().clone().addClass("clone")},this)),this.slideList.append(s.first).prepend(s.last),this.slideList.css({width:this.screenWidth*(this.slideCount+2),left:-this.screenWidth}),this.index=1}else this.slideList.css({width:this.screenWidth*this.slideCount}),this.index=0,this.changeBtnStatus(this.index);this.nav&&(this.controls=this.nav.find("[data-index]"),this.controlIndex=1,this.controls.eq(0).addClass("active")),this.listen(),this.delay=this.options.interval+this.options.duration,this.autoplay&&this.play()},listen:function(){var i=this;this.nav&&this.controls.click(function(s){var n=t(s.currentTarget),e=n.data("index");e!==i.targetIndex&&(i.targetIndex=e,i.pause(),i.turnTo(e))}),this.prevBtn&&this.prevBtn.click(function(s){s.preventDefault(),t(this).hasClass("disabled")||i.prev()}),this.nextBtn&&this.nextBtn.click(function(s){s.preventDefault(),t(this).hasClass("disabled")||i.next()}),this.autoplay&&this.screen.on("mouseenter",t.proxy(this.pause,this)).on("mouseleave",t.proxy(this.play,this))},turnTo:function(i,s){var n=t.proxy(function(){this.isPlaying=!1,this.autoplay&&this.play(),s&&(i=this.move(s)),this.turnEnd(i)},this);this.moveControl(s||i),this.autoplay&&(this.isPlaying=!0),this.slideList.stop().animate({left:-i*this.screenWidth},this.options.duration,n)},moveControl:function(t){if(this.controlIndex!==t&&this.nav){var i=this.nav.find(".active"),s=this.controls.eq(t-1);i.removeClass("active"),s.addClass("active"),this.controlIndex=t}},turnEnd:function(t){this.index=t,this.targetIndex=null,this.options.onTurnTo&&this.options.onTurnTo.apply(this,arguments)},play:function(i){if(this.delay&&!this.interval)return this.interval=setInterval(t.proxy(this.next,this),this.delay),this},pause:function(t){if(this.delay)return clearInterval(this.interval),this.interval=null,this},move:function(t){return this.slideList.css({left:-t*this.screenWidth}),t},slide:function(t){if(!this.isPlaying){var i="next"===t,s=i?1:-1,n=this.index+s,e=i?n>this.slideCount:n<=0,h=n;this.loop?e?(h=i?1:this.slideCount,this.turnTo(n,h)):this.turnTo(n):(this.changeBtnStatus(n),this.turnTo(n)),this.targetIndex=h}},next:function(){this.pause().slide("next")},prev:function(t){this.pause().slide("prev")},changeBtnStatus:function(t){t=t||0,this.prevBtn[0===t?"addClass":"removeClass"]("disabled"),this.nextBtn[t===this.slideCount-1?"addClass":"removeClass"]("disabled")}}),i});